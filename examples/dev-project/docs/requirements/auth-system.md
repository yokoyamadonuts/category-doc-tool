---
id: req-auth-system
title: 認証システム要件
domain: requirements
priority: high
stakeholder: セキュリティチーム
status: approved
version: "1.0"
---

# 認証システム要件

## 概要

本ドキュメントは、システムにおける認証・認可機能の要件を定義する。

## 依存関係

- @req-user-management - ユーザー管理要件に依存
- #req-auth-depends-user - 認証はユーザー管理機能を前提とする

## ビジネス要件

### BR-101: ログイン

- ユーザーはメールアドレスとパスワードでログインできること
- ログイン失敗時は5回までリトライ可能、超過時は30分ロック
- ログイン成功時はセッションを発行すること

### BR-102: ログアウト

- ユーザーは明示的にログアウトできること
- ログアウト時はセッションを無効化すること
- 全デバイスからのログアウト機能を提供すること

### BR-103: トークン管理

- アクセストークンの有効期限は1時間
- リフレッシュトークンの有効期限は7日
- トークンはJWT形式で発行すること

## 機能要件

### FR-101: 認証エンドポイント

| エンドポイント | メソッド | 説明 |
|---------------|---------|------|
| /auth/login | POST | ログイン |
| /auth/logout | POST | ログアウト |
| /auth/refresh | POST | トークン更新 |
| /auth/verify | GET | トークン検証 |

### FR-102: 認可

- ロールベースアクセス制御（RBAC）
- 基本ロール: user, admin, super_admin
- リソースレベルの権限制御

## 非機能要件

### NFR-101: セキュリティ

- HTTPS必須
- CSRF対策
- XSS対策
- レート制限（1分あたり60リクエスト）

### NFR-102: 可用性

- 99.9%のアップタイム
- フェイルオーバー対応
- セッション情報のレプリケーション

## 関連ドキュメント

- @req-user-management - ユーザー管理要件
- @spec-auth-api - 認証API仕様（本要件を実現）

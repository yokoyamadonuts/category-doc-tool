{
  "id": "snapshot_1764440728268_ge5svqpf6",
  "approvalId": "approval_1764440728249_qu7qw13g7",
  "approvalTitle": "Tasks Document for CatDoc MVP",
  "version": 1,
  "timestamp": "2025-11-29T18:25:28.268Z",
  "trigger": "initial",
  "status": "pending",
  "content": "# Tasks Document\n\n## TDD Reference\n\nFor tasks marked with `_TDD: true_`, you MUST follow the TDD workflow using these tools:\n\n1. **[RED] Gate-A**: Write failing tests → `run-tests` (all fail) → `tdd-gate` validate/approve gate:A\n2. **[GREEN] Gate-B**: Implement code → `run-tests` (all pass) → `tdd-gate` validate/approve gate:B\n3. **[REFACTOR] Gate-C**: Refactor → `run-tests` (still pass) → `generate-trace` → `tdd-gate` validate/approve gate:C\n\nTask cannot be marked [x] until Gate-C is approved.\n\n---\n\n## Phase 1: Domain Layer - Core Entities\n\n### Task 1.1: Object Entity\n\n- [ ] 1.1 Create Object entity class\n  - File: `src/domain/entities/Object.ts`\n  - Implement immutable Object class with id, title, domain, metadata, content\n  - Pure TypeScript implementation (no external dependencies)\n  - Purpose: Represent category theory objects (documents)\n  - _Leverage: None (base entity)_\n  - _Requirements: REQ-DOC-001, REQ-DOC-002_\n  - _TDD: true_\n  - _TestPath: tests/domain/Object.test.ts_\n  - _Language: ts_\n  - _Prompt: |\n      Implement the task for spec catdoc-mvp, first run spec-workflow-guide to get the workflow guide then implement the task:\n\n      Role: TypeScript Developer specializing in domain-driven design and category theory\n\n      Task: Create the Object entity class in src/domain/entities/Object.ts following these specifications:\n      - Immutable class with readonly properties: id (string), title (string), domain (string), metadata (Record<string, any>), content (string | undefined)\n      - Constructor accepting all properties\n      - Getter methods: getId(), getTitle(), getDomain(), getMetadata(), getContent()\n      - Factory method: static create(id, title, domain, metadata?, content?)\n      - Validation: id and title must be non-empty strings\n\n      Restrictions:\n      - No external dependencies (pure TypeScript)\n      - Do not add methods not specified\n      - Follow immutability pattern\n\n      _Leverage: None (base entity)\n      _Requirements: REQ-DOC-001, REQ-DOC-002\n\n      Success:\n      - All tests pass with 80%+ coverage\n      - Gate-A (RED): Tests written, all fail\n      - Gate-B (GREEN): Implementation complete, all pass\n      - Gate-C (REFACTOR): Code clean, traceability complete\n\n      Instructions:\n      1. First mark this task as [-] in tasks.md\n      2. Follow TDD workflow strictly using tdd-gate tool\n      3. After Gate-C approval, mark task as [x] in tasks.md_\n\n### Task 1.2: Morphism Entity\n\n- [ ] 1.2 Create Morphism entity class\n  - File: `src/domain/entities/Morphism.ts`\n  - Implement Morphism class representing arrows between objects\n  - Include compose() method for morphism composition\n  - Purpose: Represent category theory morphisms (relationships)\n  - _Leverage: src/domain/entities/Object.ts_\n  - _Requirements: REQ-CAT-001, REQ-CAT-002_\n  - _TDD: true_\n  - _TestPath: tests/domain/Morphism.test.ts_\n  - _Language: ts_\n  - _Prompt: |\n      Implement the task for spec catdoc-mvp, first run spec-workflow-guide to get the workflow guide then implement the task:\n\n      Role: TypeScript Developer with category theory knowledge\n\n      Task: Create the Morphism entity class in src/domain/entities/Morphism.ts:\n      - Immutable class with: id (string), name (string), source (string), target (string), metadata (Record<string, any>)\n      - Constructor accepting all properties\n      - Getter methods: getId(), getName(), getSource(), getTarget(), getMetadata()\n      - compose(other: Morphism): Morphism | null - returns composed morphism if this.target === other.source, null otherwise\n      - Factory method: static create(id, name, source, target, metadata?)\n      - Static identity method: static identity(objectId: string): Morphism\n\n      Restrictions:\n      - No external dependencies\n      - compose() must validate composability (target === other.source)\n      - Identity morphism has source === target\n\n      _Leverage: src/domain/entities/Object.ts\n      _Requirements: REQ-CAT-001, REQ-CAT-002\n\n      Success:\n      - Gate-A/B/C all approved\n      - compose() correctly handles all cases\n      - Identity morphisms work correctly\n\n      Instructions:\n      1. First mark this task as [-] in tasks.md\n      2. Follow TDD workflow strictly\n      3. After Gate-C approval, mark task as [x] in tasks.md_\n\n### Task 1.3: Category Entity\n\n- [ ] 1.3 Create Category entity class\n  - File: `src/domain/entities/Category.ts`\n  - Implement Category class containing objects and morphisms\n  - Include lookup methods for objects and morphisms\n  - Purpose: Represent a category with objects and morphisms\n  - _Leverage: src/domain/entities/Object.ts, src/domain/entities/Morphism.ts_\n  - _Requirements: REQ-CAT-001, REQ-CAT-003_\n  - _TDD: true_\n  - _TestPath: tests/domain/Category.test.ts_\n  - _Language: ts_\n  - _Prompt: |\n      Implement the task for spec catdoc-mvp, first run spec-workflow-guide to get the workflow guide then implement the task:\n\n      Role: TypeScript Developer with category theory expertise\n\n      Task: Create the Category entity class in src/domain/entities/Category.ts:\n      - Immutable class with: id (string), name (string), objects (Object[]), morphisms (Morphism[])\n      - Constructor accepting all properties\n      - Getter methods: getId(), getName(), getObjects(), getMorphisms()\n      - Lookup methods: getObject(id: string): Object | undefined, getMorphism(id: string): Morphism | undefined\n      - getMorphismsBySource(objectId: string): Morphism[]\n      - getMorphismsByTarget(objectId: string): Morphism[]\n      - Factory method: static create(id, name, objects?, morphisms?)\n\n      Restrictions:\n      - No external dependencies\n      - Objects and morphisms arrays should be immutable (return copies)\n\n      _Leverage: src/domain/entities/Object.ts, src/domain/entities/Morphism.ts\n      _Requirements: REQ-CAT-001, REQ-CAT-003\n\n      Success:\n      - Gate-A/B/C all approved\n      - All lookup methods work correctly\n      - Immutability maintained\n\n      Instructions:\n      1. First mark this task as [-] in tasks.md\n      2. Follow TDD workflow strictly\n      3. After Gate-C approval, mark task as [x] in tasks.md_\n\n### Task 1.4: Functor Entity\n\n- [ ] 1.4 Create Functor entity class\n  - File: `src/domain/entities/Functor.ts`\n  - Implement Functor class for category mappings\n  - Include mapping methods and axiom checking\n  - Purpose: Represent functors between categories\n  - _Leverage: src/domain/entities/Category.ts, src/domain/entities/Object.ts, src/domain/entities/Morphism.ts_\n  - _Requirements: REQ-CAT-003_\n  - _TDD: true_\n  - _TestPath: tests/domain/Functor.test.ts_\n  - _Language: ts_\n  - _Prompt: |\n      Implement the task for spec catdoc-mvp, first run spec-workflow-guide to get the workflow guide then implement the task:\n\n      Role: TypeScript Developer specializing in category theory implementations\n\n      Task: Create the Functor entity class in src/domain/entities/Functor.ts:\n      - Immutable class with: id (string), name (string), sourceCategory (string), targetCategory (string), objectMapping (Map<string, string>), morphismMapping (Map<string, string>)\n      - Constructor accepting all properties\n      - Getter methods: getId(), getName(), getSourceCategory(), getTargetCategory()\n      - mapObject(objectId: string): string | undefined\n      - mapMorphism(morphismId: string): string | undefined\n      - Factory method: static create(id, name, sourceCategory, targetCategory, objectMapping, morphismMapping)\n\n      Restrictions:\n      - No external dependencies\n      - Maps should be immutable (return new Map on get)\n      - Validation of mapping consistency is done in services\n\n      _Leverage: src/domain/entities/Category.ts\n      _Requirements: REQ-CAT-003\n\n      Success:\n      - Gate-A/B/C all approved\n      - Mapping methods work correctly\n      - Immutability maintained\n\n      Instructions:\n      1. First mark this task as [-] in tasks.md\n      2. Follow TDD workflow strictly\n      3. After Gate-C approval, mark task as [x] in tasks.md_\n\n### Task 1.5: NaturalTransformation Entity\n\n- [ ] 1.5 Create NaturalTransformation entity class\n  - File: `src/domain/entities/NaturalTransformation.ts`\n  - Implement NaturalTransformation class for functor mappings\n  - Include component access methods\n  - Purpose: Represent natural transformations between functors\n  - _Leverage: src/domain/entities/Functor.ts, src/domain/entities/Morphism.ts_\n  - _Requirements: REQ-CAT-004_\n  - _TDD: true_\n  - _TestPath: tests/domain/NaturalTransformation.test.ts_\n  - _Language: ts_\n  - _Prompt: |\n      Implement the task for spec catdoc-mvp, first run spec-workflow-guide to get the workflow guide then implement the task:\n\n      Role: TypeScript Developer with advanced category theory knowledge\n\n      Task: Create the NaturalTransformation entity class in src/domain/entities/NaturalTransformation.ts:\n      - Immutable class with: id (string), name (string), sourceFunctor (string), targetFunctor (string), components (Map<string, string>) - maps object id to morphism id\n      - Constructor accepting all properties\n      - Getter methods: getId(), getName(), getSourceFunctor(), getTargetFunctor()\n      - getComponent(objectId: string): string | undefined\n      - getAllComponents(): Map<string, string>\n      - Factory method: static create(id, name, sourceFunctor, targetFunctor, components)\n\n      Restrictions:\n      - No external dependencies\n      - Components map should be immutable\n      - Naturality verification is done in services\n\n      _Leverage: src/domain/entities/Functor.ts, src/domain/entities/Morphism.ts\n      _Requirements: REQ-CAT-004\n\n      Success:\n      - Gate-A/B/C all approved\n      - Component access works correctly\n      - Immutability maintained\n\n      Instructions:\n      1. First mark this task as [-] in tasks.md\n      2. Follow TDD workflow strictly\n      3. After Gate-C approval, mark task as [x] in tasks.md_\n\n---\n\n## Phase 2: Domain Layer - Services\n\n### Task 2.1: CompositionService\n\n- [ ] 2.1 Create CompositionService\n  - File: `src/domain/services/CompositionService.ts`\n  - Implement morphism and functor composition logic\n  - Pure domain service with no external dependencies\n  - Purpose: Calculate morphism and functor compositions\n  - _Leverage: src/domain/entities/Morphism.ts, src/domain/entities/Functor.ts_\n  - _Requirements: REQ-CAT-002_\n  - _TDD: true_\n  - _TestPath: tests/domain/CompositionService.test.ts_\n  - _Language: ts_\n  - _Prompt: |\n      Implement the task for spec catdoc-mvp, first run spec-workflow-guide to get the workflow guide then implement the task:\n\n      Role: TypeScript Developer specializing in domain services\n\n      Task: Create CompositionService in src/domain/services/CompositionService.ts:\n      - Class with methods:\n        - composeMorphisms(f: Morphism, g: Morphism): Morphism | null\n          - Returns g∘f if f.target === g.source\n          - Composed morphism has id: `composed-${f.id}-${g.id}`, name: `${g.name}∘${f.name}`\n        - composeFunctors(f: Functor, g: Functor): Functor | null\n          - Returns g∘f if f.targetCategory === g.sourceCategory\n          - Composes object and morphism mappings\n\n      Restrictions:\n      - No external dependencies\n      - Return null for invalid compositions\n      - Do not modify input entities\n\n      _Leverage: src/domain/entities/Morphism.ts, src/domain/entities/Functor.ts\n      _Requirements: REQ-CAT-002\n\n      Success:\n      - Gate-A/B/C all approved\n      - Composition logic is mathematically correct\n      - Edge cases handled\n\n      Instructions:\n      1. First mark this task as [-] in tasks.md\n      2. Follow TDD workflow strictly\n      3. After Gate-C approval, mark task as [x] in tasks.md_\n\n### Task 2.2: VerificationService\n\n- [ ] 2.2 Create VerificationService\n  - File: `src/domain/services/VerificationService.ts`\n  - Implement category axiom verification (identity, associativity)\n  - Implement functor axiom verification\n  - Implement natural transformation verification\n  - Purpose: Verify mathematical correctness of category structures\n  - _Leverage: src/domain/entities/*.ts, src/domain/services/CompositionService.ts_\n  - _Requirements: REQ-CAT-002, REQ-CAT-003, REQ-CAT-004_\n  - _TDD: true_\n  - _TestPath: tests/domain/VerificationService.test.ts_\n  - _Language: ts_\n  - _Prompt: |\n      Implement the task for spec catdoc-mvp, first run spec-workflow-guide to get the workflow guide then implement the task:\n\n      Role: TypeScript Developer with deep category theory expertise\n\n      Task: Create VerificationService in src/domain/services/VerificationService.ts:\n      - Interface VerificationResult { isValid: boolean; errors: string[]; warnings: string[] }\n      - Class with methods:\n        - verifyCategory(category: Category): VerificationResult\n          - Check identity morphism exists for each object\n          - Check composition closure (f: A→B, g: B→C implies g∘f exists or is derivable)\n          - Check associativity: (h∘g)∘f = h∘(g∘f)\n        - verifyFunctor(functor: Functor, source: Category, target: Category): VerificationResult\n          - Check identity preservation: F(id_A) = id_{F(A)}\n          - Check composition preservation: F(g∘f) = F(g)∘F(f)\n        - verifyNaturalTransformation(natTrans: NaturalTransformation, sourceFunctor: Functor, targetFunctor: Functor, category: Category): VerificationResult\n          - Check naturality: for all f: A→B, η_B ∘ F(f) = G(f) ∘ η_A\n\n      Restrictions:\n      - No external dependencies except domain entities\n      - Return detailed error messages with object/morphism IDs\n      - Use CompositionService for composition calculations\n\n      _Leverage: src/domain/entities/*.ts, src/domain/services/CompositionService.ts\n      _Requirements: REQ-CAT-002, REQ-CAT-003, REQ-CAT-004\n\n      Success:\n      - Gate-A/B/C all approved\n      - All category axioms verified correctly\n      - Detailed error reporting\n\n      Instructions:\n      1. First mark this task as [-] in tasks.md\n      2. Follow TDD workflow strictly\n      3. After Gate-C approval, mark task as [x] in tasks.md_\n\n### Task 2.3: TraversalService\n\n- [ ] 2.3 Create TraversalService\n  - File: `src/domain/services/TraversalService.ts`\n  - Implement path finding between objects\n  - Implement domain path finding through functors\n  - Purpose: Find transformation paths through categories\n  - _Leverage: src/domain/entities/*.ts_\n  - _Requirements: REQ-SEARCH-001_\n  - _TDD: true_\n  - _TestPath: tests/domain/TraversalService.test.ts_\n  - _Language: ts_\n  - _Prompt: |\n      Implement the task for spec catdoc-mvp, first run spec-workflow-guide to get the workflow guide then implement the task:\n\n      Role: TypeScript Developer specializing in graph algorithms\n\n      Task: Create TraversalService in src/domain/services/TraversalService.ts:\n      - Interface TransformationPath { steps: Array<Functor | NaturalTransformation>; resultObject: string }\n      - Class with methods:\n        - findPath(source: string, target: string, category: Category): Morphism[]\n          - BFS/DFS to find morphism path from source to target\n          - Return empty array if no path exists\n        - findAllPaths(source: string, target: string, category: Category): Morphism[][]\n          - Find all possible paths (up to reasonable limit)\n        - findDomainPath(sourceObj: string, targetCat: string, categories: Category[], functors: Functor[], natTransforms: NaturalTransformation[]): TransformationPath[]\n          - Find paths through functors and natural transformations to reach target category\n\n      Restrictions:\n      - No external dependencies\n      - Limit path search depth to avoid infinite loops\n      - Return paths sorted by length\n\n      _Leverage: src/domain/entities/*.ts\n      _Requirements: REQ-SEARCH-001\n\n      Success:\n      - Gate-A/B/C all approved\n      - Path finding works for complex graphs\n      - Performance acceptable for 1000+ nodes\n\n      Instructions:\n      1. First mark this task as [-] in tasks.md\n      2. Follow TDD workflow strictly\n      3. After Gate-C approval, mark task as [x] in tasks.md_\n\n---\n\n## Phase 3: Domain Layer - Repository Interfaces\n\n### Task 3.1: Repository Interfaces\n\n- [ ] 3.1 Create repository interfaces\n  - File: `src/domain/interfaces/IRepository.ts`\n  - Define interfaces for all entity repositories\n  - Purpose: Abstract data access for Clean Architecture\n  - _Leverage: src/domain/entities/*.ts_\n  - _Requirements: REQ-SYS-001_\n  - _TDD: false_\n  - _Prompt: |\n      Implement the task for spec catdoc-mvp, first run spec-workflow-guide to get the workflow guide then implement the task:\n\n      Role: TypeScript Architect specializing in Clean Architecture\n\n      Task: Create repository interfaces in src/domain/interfaces/IRepository.ts:\n      - IObjectRepository { findAll(): Promise<Object[]>; findById(id: string): Promise<Object | null>; findByCategoryId(categoryId: string): Promise<Object[]>; save(obj: Object): Promise<void>; delete(id: string): Promise<void> }\n      - IMorphismRepository { findAll(): Promise<Morphism[]>; findById(id: string): Promise<Morphism | null>; findBySourceAndTarget(source: string, target: string): Promise<Morphism[]>; findComposablePath(source: string, target: string): Promise<Morphism[]>; save(morphism: Morphism): Promise<void>; delete(id: string): Promise<void> }\n      - ICategoryRepository { findAll(): Promise<Category[]>; findById(id: string): Promise<Category | null>; findByName(name: string): Promise<Category | null>; save(category: Category): Promise<void>; delete(id: string): Promise<void> }\n      - IFunctorRepository { findAll(): Promise<Functor[]>; findById(id: string): Promise<Functor | null>; findBySourceCategory(categoryId: string): Promise<Functor[]>; findByTargetCategory(categoryId: string): Promise<Functor[]>; save(functor: Functor): Promise<void>; delete(id: string): Promise<void> }\n      - INaturalTransformationRepository { findAll(): Promise<NaturalTransformation[]>; findById(id: string): Promise<NaturalTransformation | null>; findBySourceFunctor(functorId: string): Promise<NaturalTransformation[]>; findByTargetFunctor(functorId: string): Promise<NaturalTransformation[]>; save(natTrans: NaturalTransformation): Promise<void>; delete(id: string): Promise<void> }\n\n      Restrictions:\n      - Only interface definitions, no implementations\n      - Follow Promise-based async pattern\n      - No external dependencies\n\n      _Leverage: src/domain/entities/*.ts\n      _Requirements: REQ-SYS-001\n\n      Success:\n      - Interfaces compile without errors\n      - Complete coverage of CRUD operations\n      - Consistent naming and patterns\n\n      Instructions:\n      1. First mark this task as [-] in tasks.md\n      2. Implement interfaces\n      3. Mark task as [x] in tasks.md when complete_\n\n---\n\n## Phase 4: Infrastructure Layer - Neo4j\n\n### Task 4.1: Neo4j Connection\n\n- [ ] 4.1 Create Neo4j connection manager\n  - File: `src/infrastructure/database/neo4j/connection.ts`\n  - Implement connection pool and query execution\n  - Purpose: Manage Neo4j database connections\n  - _Leverage: neo4j-driver package_\n  - _Requirements: REQ-SYS-001_\n  - _TDD: true_\n  - _TestPath: tests/infrastructure/neo4j/connection.test.ts_\n  - _Language: ts_\n  - _Prompt: |\n      Implement the task for spec catdoc-mvp, first run spec-workflow-guide to get the workflow guide then implement the task:\n\n      Role: Backend Developer with Neo4j expertise\n\n      Task: Create Neo4j connection manager in src/infrastructure/database/neo4j/connection.ts:\n      - Class Neo4jConnection with:\n        - constructor(uri: string, username: string, password: string)\n        - async connect(): Promise<void> - establish connection with retry logic (3 retries, exponential backoff)\n        - async executeQuery(cypher: string, params: Record<string, any>): Promise<QueryResult>\n        - async close(): Promise<void>\n        - isConnected(): boolean\n      - Handle connection errors gracefully\n      - Implement connection pool management\n\n      Restrictions:\n      - Use official neo4j-driver package\n      - Implement proper error handling\n      - Log connection events\n\n      _Leverage: neo4j-driver package\n      _Requirements: REQ-SYS-001\n\n      Success:\n      - Gate-A/B/C all approved\n      - Connection retry logic works\n      - Proper resource cleanup\n\n      Instructions:\n      1. First mark this task as [-] in tasks.md\n      2. Follow TDD workflow strictly\n      3. After Gate-C approval, mark task as [x] in tasks.md_\n\n### Task 4.2: Neo4j Schema\n\n- [ ] 4.2 Create Neo4j schema definitions\n  - File: `src/infrastructure/database/neo4j/schema.ts`\n  - Define node labels and relationship types\n  - Create schema initialization queries\n  - Purpose: Define graph database structure\n  - _Leverage: src/domain/entities/*.ts_\n  - _Requirements: REQ-SYS-001_\n  - _TDD: false_\n  - _Prompt: |\n      Implement the task for spec catdoc-mvp, first run spec-workflow-guide to get the workflow guide then implement the task:\n\n      Role: Database Administrator with Neo4j expertise\n\n      Task: Create Neo4j schema in src/infrastructure/database/neo4j/schema.ts:\n      - Export node labels: OBJECT, CATEGORY, FUNCTOR, NATURAL_TRANSFORMATION\n      - Export relationship types: MORPHISM, IDENTITY, COMPOSED, BELONGS_TO, MAPS_OBJECT, MAPS_MORPHISM\n      - Function getIndexCreationQueries(): string[] - returns Cypher queries for all indexes\n      - Function getConstraintCreationQueries(): string[] - returns Cypher queries for uniqueness constraints\n      - Function initializeSchema(connection: Neo4jConnection): Promise<void> - runs all schema setup\n\n      Restrictions:\n      - Follow design.md schema specifications exactly\n      - Include all necessary indexes for performance\n\n      _Leverage: src/domain/entities/*.ts\n      _Requirements: REQ-SYS-001\n\n      Success:\n      - Schema matches design.md specifications\n      - All indexes defined\n      - Initialization works correctly\n\n      Instructions:\n      1. First mark this task as [-] in tasks.md\n      2. Implement schema definitions\n      3. Mark task as [x] in tasks.md when complete_\n\n### Task 4.3: Neo4j Repositories\n\n- [ ] 4.3 Implement Neo4j repositories\n  - Files: `src/infrastructure/database/neo4j/repositories/*.ts`\n  - Implement all repository interfaces for Neo4j\n  - Use Cypher queries for graph operations\n  - Purpose: Provide graph data persistence\n  - _Leverage: src/domain/interfaces/IRepository.ts, src/infrastructure/database/neo4j/connection.ts_\n  - _Requirements: REQ-SYS-001_\n  - _TDD: true_\n  - _TestPath: tests/infrastructure/neo4j/repositories/*.test.ts_\n  - _Language: ts_\n  - _Prompt: |\n      Implement the task for spec catdoc-mvp, first run spec-workflow-guide to get the workflow guide then implement the task:\n\n      Role: Backend Developer with Neo4j and Cypher expertise\n\n      Task: Implement Neo4j repositories:\n      - ObjectRepository.ts - implements IObjectRepository\n      - MorphismRepository.ts - implements IMorphismRepository (uses MORPHISM relationships)\n      - CategoryRepository.ts - implements ICategoryRepository\n      - FunctorRepository.ts - implements IFunctorRepository (stores mappings as JSON properties)\n      - NaturalTransformationRepository.ts - implements INaturalTransformationRepository\n\n      Each repository:\n      - Constructor takes Neo4jConnection\n      - Uses Cypher queries optimized for graph operations\n      - Handles entity<->node mapping\n\n      Restrictions:\n      - Use parameterized queries to prevent injection\n      - Follow repository interface contracts exactly\n      - Optimize queries for performance\n\n      _Leverage: src/domain/interfaces/IRepository.ts, src/infrastructure/database/neo4j/connection.ts\n      _Requirements: REQ-SYS-001\n\n      Success:\n      - Gate-A/B/C all approved for each repository\n      - All interface methods implemented\n      - Queries are optimized\n\n      Instructions:\n      1. First mark this task as [-] in tasks.md\n      2. Follow TDD workflow strictly\n      3. After Gate-C approval, mark task as [x] in tasks.md_\n\n---\n\n## Phase 5: Infrastructure Layer - Turso\n\n### Task 5.1: Turso Connection\n\n- [ ] 5.1 Create Turso connection manager\n  - File: `src/infrastructure/database/turso/connection.ts`\n  - Implement connection and query execution\n  - Purpose: Manage Turso database connections\n  - _Leverage: @libsql/client package_\n  - _Requirements: REQ-SYS-001_\n  - _TDD: true_\n  - _TestPath: tests/infrastructure/turso/connection.test.ts_\n  - _Language: ts_\n  - _Prompt: |\n      Implement the task for spec catdoc-mvp, first run spec-workflow-guide to get the workflow guide then implement the task:\n\n      Role: Backend Developer with SQLite/Turso expertise\n\n      Task: Create Turso connection in src/infrastructure/database/turso/connection.ts:\n      - Class TursoConnection with:\n        - constructor(url: string, authToken: string)\n        - async connect(): Promise<void> - with retry logic\n        - async execute(sql: string, params: any[]): Promise<Result>\n        - async close(): Promise<void>\n        - isConnected(): boolean\n      - Handle connection failures gracefully\n      - Support local SQLite fallback for development\n\n      Restrictions:\n      - Use @libsql/client package\n      - Implement proper error handling\n      - Support both remote Turso and local SQLite\n\n      _Leverage: @libsql/client package\n      _Requirements: REQ-SYS-001\n\n      Success:\n      - Gate-A/B/C all approved\n      - Works with both Turso and local SQLite\n      - Proper error handling\n\n      Instructions:\n      1. First mark this task as [-] in tasks.md\n      2. Follow TDD workflow strictly\n      3. After Gate-C approval, mark task as [x] in tasks.md_\n\n### Task 5.2: Turso Schema and Repositories\n\n- [ ] 5.2 Create Turso schema and repositories\n  - Files: `src/infrastructure/database/turso/schema.ts`, `src/infrastructure/database/turso/repositories/*.ts`\n  - Define tables for users, settings, audit_logs\n  - Implement UserRepository and ConfigRepository\n  - Purpose: Store metadata in relational database\n  - _Leverage: src/infrastructure/database/turso/connection.ts_\n  - _Requirements: REQ-SYS-001, REQ-SYS-002_\n  - _TDD: true_\n  - _TestPath: tests/infrastructure/turso/*.test.ts_\n  - _Language: ts_\n  - _Prompt: |\n      Implement the task for spec catdoc-mvp, first run spec-workflow-guide to get the workflow guide then implement the task:\n\n      Role: Backend Developer with SQL and repository pattern expertise\n\n      Task: Create Turso schema and repositories:\n      - schema.ts:\n        - Tables: users, settings, audit_logs (as defined in design.md)\n        - Function getTableCreationQueries(): string[]\n        - Function initializeSchema(connection: TursoConnection): Promise<void>\n      - UserRepository.ts: findById, save\n      - ConfigRepository.ts: get, set, getAll\n\n      Restrictions:\n      - Use prepared statements for all queries\n      - Follow design.md schema exactly\n      - Handle concurrent access properly\n\n      _Leverage: src/infrastructure/database/turso/connection.ts\n      _Requirements: REQ-SYS-001, REQ-SYS-002\n\n      Success:\n      - Gate-A/B/C all approved\n      - Schema matches design.md\n      - Repositories work correctly\n\n      Instructions:\n      1. First mark this task as [-] in tasks.md\n      2. Follow TDD workflow strictly\n      3. After Gate-C approval, mark task as [x] in tasks.md_\n\n---\n\n## Phase 6: Infrastructure Layer - Parsers\n\n### Task 6.1: YAML Parser\n\n- [ ] 6.1 Create YAML parser for category.yaml\n  - File: `src/infrastructure/parsers/YamlParser.ts`\n  - Parse and validate category.yaml configuration\n  - Convert to domain entities\n  - Purpose: Load category structure from YAML\n  - _Leverage: yaml package, zod package_\n  - _Requirements: REQ-CAT-001, REQ-CAT-003, REQ-CAT-004_\n  - _TDD: true_\n  - _TestPath: tests/infrastructure/parsers/YamlParser.test.ts_\n  - _Language: ts_\n  - _Prompt: |\n      Implement the task for spec catdoc-mvp, first run spec-workflow-guide to get the workflow guide then implement the task:\n\n      Role: Backend Developer with YAML/validation expertise\n\n      Task: Create YamlParser in src/infrastructure/parsers/YamlParser.ts:\n      - Interface CategoryConfig { categories, morphisms, functors, naturalTransformations }\n      - Interface ValidationResult { isValid: boolean; errors: string[] }\n      - Class YamlParser:\n        - async parse(filePath: string): Promise<CategoryConfig>\n        - validate(config: CategoryConfig): ValidationResult\n        - toEntities(config: CategoryConfig): { categories: Category[]; morphisms: Morphism[]; functors: Functor[]; naturalTransformations: NaturalTransformation[] }\n      - Use zod for schema validation\n      - Support partial configs (missing sections allowed with warnings)\n\n      Restrictions:\n      - Use yaml package for parsing\n      - Use zod for validation\n      - Return detailed validation errors with line numbers if possible\n\n      _Leverage: yaml package, zod package\n      _Requirements: REQ-CAT-001, REQ-CAT-003, REQ-CAT-004\n\n      Success:\n      - Gate-A/B/C all approved\n      - Parses valid YAML correctly\n      - Validation catches all errors\n\n      Instructions:\n      1. First mark this task as [-] in tasks.md\n      2. Follow TDD workflow strictly\n      3. After Gate-C approval, mark task as [x] in tasks.md_\n\n### Task 6.2: Markdown Parser\n\n- [ ] 6.2 Create Markdown parser for document import\n  - File: `src/infrastructure/parsers/MarkdownParser.ts`\n  - Parse Markdown with YAML frontmatter\n  - Extract metadata and content\n  - Purpose: Import documents as objects\n  - _Leverage: gray-matter or similar package_\n  - _Requirements: REQ-DOC-001_\n  - _TDD: true_\n  - _TestPath: tests/infrastructure/parsers/MarkdownParser.test.ts_\n  - _Language: ts_\n  - _Prompt: |\n      Implement the task for spec catdoc-mvp, first run spec-workflow-guide to get the workflow guide then implement the task:\n\n      Role: Backend Developer with Markdown processing expertise\n\n      Task: Create MarkdownParser in src/infrastructure/parsers/MarkdownParser.ts:\n      - Interface ParsedDocument { id?: string; title: string; domain?: string; metadata: Record<string, any>; content: string }\n      - Class MarkdownParser:\n        - async parse(filePath: string): Promise<ParsedDocument>\n        - async parseMany(pattern: string): Promise<ParsedDocument[]>\n        - extractMetadata(content: string): { metadata: Record<string, any>; content: string }\n      - Extract YAML frontmatter as metadata\n      - Use filename as default id if not in frontmatter\n      - Use first H1 as title if not in frontmatter\n\n      Restrictions:\n      - Handle missing frontmatter gracefully\n      - Support common frontmatter fields (title, id, domain, etc.)\n      - Validate file existence\n\n      _Leverage: gray-matter or similar package\n      _Requirements: REQ-DOC-001\n\n      Success:\n      - Gate-A/B/C all approved\n      - Frontmatter parsed correctly\n      - Content preserved accurately\n\n      Instructions:\n      1. First mark this task as [-] in tasks.md\n      2. Follow TDD workflow strictly\n      3. After Gate-C approval, mark task as [x] in tasks.md_\n\n---\n\n## Phase 7: Application Layer - CLI\n\n### Task 7.1: CLI Init Command\n\n- [ ] 7.1 Create catdoc init command\n  - File: `src/application/cli/init.ts`\n  - Initialize .catdoc directory and databases\n  - Generate template files\n  - Purpose: Set up new CatDoc project\n  - _Leverage: commander package, src/infrastructure/database/*.ts_\n  - _Requirements: REQ-SYS-002_\n  - _TDD: true_\n  - _TestPath: tests/application/cli/init.test.ts_\n  - _Language: ts_\n  - _Prompt: |\n      Implement the task for spec catdoc-mvp, first run spec-workflow-guide to get the workflow guide then implement the task:\n\n      Role: CLI Developer with Node.js expertise\n\n      Task: Create init command in src/application/cli/init.ts:\n      - Function initCommand() - commander command definition\n      - Creates .catdoc/ directory\n      - Generates .catdoc/category.yaml template with examples\n      - Generates .catdoc/config.yaml for database settings\n      - Initializes Neo4j schema (if connection available)\n      - Initializes Turso schema (if connection available)\n      - Shows success message with next steps\n      - Handles existing .catdoc/ (prompt for overwrite)\n\n      Restrictions:\n      - Use commander for CLI\n      - Show progress spinners/messages\n      - Handle errors gracefully with helpful messages\n\n      _Leverage: commander package, src/infrastructure/database/*.ts\n      _Requirements: REQ-SYS-002\n\n      Success:\n      - Gate-A/B/C all approved\n      - Creates all required files\n      - Proper error handling\n\n      Instructions:\n      1. First mark this task as [-] in tasks.md\n      2. Follow TDD workflow strictly\n      3. After Gate-C approval, mark task as [x] in tasks.md_\n\n### Task 7.2: CLI Import Command\n\n- [ ] 7.2 Create catdoc import command\n  - File: `src/application/cli/import.ts`\n  - Import Markdown documents as objects\n  - Purpose: Add documents to CatDoc system\n  - _Leverage: src/infrastructure/parsers/MarkdownParser.ts, src/infrastructure/database/neo4j/repositories/ObjectRepository.ts_\n  - _Requirements: REQ-DOC-001_\n  - _TDD: true_\n  - _TestPath: tests/application/cli/import.test.ts_\n  - _Language: ts_\n  - _Prompt: |\n      Implement the task for spec catdoc-mvp, first run spec-workflow-guide to get the workflow guide then implement the task:\n\n      Role: CLI Developer with document processing expertise\n\n      Task: Create import command in src/application/cli/import.ts:\n      - catdoc import <file-or-pattern> - import one or more Markdown files\n      - Options: --domain <domain>, --force (overwrite existing)\n      - Parse Markdown with MarkdownParser\n      - Create Object entities and save via ObjectRepository\n      - Show progress bar for multiple files\n      - Report success/failure for each file\n      - Handle duplicate IDs (prompt or --force)\n\n      Restrictions:\n      - Use commander for CLI\n      - Show clear progress feedback\n      - Handle file not found errors\n\n      _Leverage: src/infrastructure/parsers/MarkdownParser.ts, src/infrastructure/database/neo4j/repositories/ObjectRepository.ts\n      _Requirements: REQ-DOC-001\n\n      Success:\n      - Gate-A/B/C all approved\n      - Imports files correctly\n      - Proper error handling\n\n      Instructions:\n      1. First mark this task as [-] in tasks.md\n      2. Follow TDD workflow strictly\n      3. After Gate-C approval, mark task as [x] in tasks.md_\n\n### Task 7.3: CLI Validate Command\n\n- [ ] 7.3 Create catdoc validate command\n  - File: `src/application/cli/validate.ts`\n  - Validate category structure and axioms\n  - Purpose: Check mathematical correctness\n  - _Leverage: src/domain/services/VerificationService.ts, src/infrastructure/parsers/YamlParser.ts_\n  - _Requirements: REQ-CAT-002, REQ-CAT-003, REQ-CAT-004_\n  - _TDD: true_\n  - _TestPath: tests/application/cli/validate.test.ts_\n  - _Language: ts_\n  - _Prompt: |\n      Implement the task for spec catdoc-mvp, first run spec-workflow-guide to get the workflow guide then implement the task:\n\n      Role: CLI Developer with validation expertise\n\n      Task: Create validate command in src/application/cli/validate.ts:\n      - catdoc validate - validate all categories, functors, natural transformations\n      - Options: --categories, --functors, --natural-transformations (validate specific types)\n      - Load data from database and category.yaml\n      - Run VerificationService checks\n      - Display results with colored output (✓ pass, ✗ fail, ⚠ warning)\n      - List all errors with specific object/morphism IDs\n      - Exit code 0 if valid, 1 if errors\n\n      Restrictions:\n      - Use commander for CLI\n      - Show detailed error information\n      - Performance: complete in <1s for typical use\n\n      _Leverage: src/domain/services/VerificationService.ts, src/infrastructure/parsers/YamlParser.ts\n      _Requirements: REQ-CAT-002, REQ-CAT-003, REQ-CAT-004\n\n      Success:\n      - Gate-A/B/C all approved\n      - All validation types work\n      - Clear error messages\n\n      Instructions:\n      1. First mark this task as [-] in tasks.md\n      2. Follow TDD workflow strictly\n      3. After Gate-C approval, mark task as [x] in tasks.md_\n\n### Task 7.4: CLI Search and Trace Commands\n\n- [ ] 7.4 Create catdoc search and trace commands\n  - Files: `src/application/cli/search.ts`, `src/application/cli/trace.ts`\n  - Search objects and trace domain paths\n  - Purpose: Find and explore document relationships\n  - _Leverage: src/domain/services/TraversalService.ts, repositories_\n  - _Requirements: REQ-DOC-002, REQ-SEARCH-001_\n  - _TDD: true_\n  - _TestPath: tests/application/cli/search.test.ts, tests/application/cli/trace.test.ts_\n  - _Language: ts_\n  - _Prompt: |\n      Implement the task for spec catdoc-mvp, first run spec-workflow-guide to get the workflow guide then implement the task:\n\n      Role: CLI Developer with search/graph expertise\n\n      Task: Create search and trace commands:\n      - search.ts:\n        - catdoc search <keyword> - search by title/content\n        - catdoc search --functor <name> <object-id> - find functor mapping\n        - catdoc search --natural <name> <object-id> - find natural transformation component\n        - Display results in table format\n      - trace.ts:\n        - catdoc trace <source-object-id> <target-category> - find transformation paths\n        - Use TraversalService.findDomainPath\n        - Display all paths with steps\n        - Highlight shortest path\n\n      Restrictions:\n      - Use commander for CLI\n      - Display results clearly\n      - Handle \"not found\" cases gracefully\n\n      _Leverage: src/domain/services/TraversalService.ts, repositories\n      _Requirements: REQ-DOC-002, REQ-SEARCH-001\n\n      Success:\n      - Gate-A/B/C all approved\n      - Search returns correct results\n      - Trace finds all paths\n\n      Instructions:\n      1. First mark this task as [-] in tasks.md\n      2. Follow TDD workflow strictly\n      3. After Gate-C approval, mark task as [x] in tasks.md_\n\n### Task 7.5: CLI List and Show Commands\n\n- [ ] 7.5 Create catdoc list and show commands\n  - File: `src/application/cli/list.ts`, `src/application/cli/show.ts`\n  - List and display objects\n  - Purpose: View document information\n  - _Leverage: repositories_\n  - _Requirements: REQ-DOC-002_\n  - _TDD: true_\n  - _TestPath: tests/application/cli/list.test.ts, tests/application/cli/show.test.ts_\n  - _Language: ts_\n  - _Prompt: |\n      Implement the task for spec catdoc-mvp, first run spec-workflow-guide to get the workflow guide then implement the task:\n\n      Role: CLI Developer\n\n      Task: Create list and show commands:\n      - list.ts:\n        - catdoc list - list all objects in table format (id, title, domain)\n        - Options: --domain <domain> (filter), --format json|table\n      - show.ts:\n        - catdoc show <object-id> - display object details\n        - Show metadata, content preview, related morphisms\n\n      Restrictions:\n      - Use commander for CLI\n      - Format output nicely\n      - Handle empty results\n\n      _Leverage: repositories\n      _Requirements: REQ-DOC-002\n\n      Success:\n      - Gate-A/B/C all approved\n      - List displays correctly\n      - Show displays all info\n\n      Instructions:\n      1. First mark this task as [-] in tasks.md\n      2. Follow TDD workflow strictly\n      3. After Gate-C approval, mark task as [x] in tasks.md_\n\n### Task 7.6: CLI Entry Point\n\n- [ ] 7.6 Create CLI entry point\n  - File: `src/index.ts`\n  - Register all commands with commander\n  - Purpose: Main CLI entry point\n  - _Leverage: all CLI commands, commander_\n  - _Requirements: REQ-SYS-002_\n  - _TDD: false_\n  - _Prompt: |\n      Implement the task for spec catdoc-mvp, first run spec-workflow-guide to get the workflow guide then implement the task:\n\n      Role: CLI Developer\n\n      Task: Create CLI entry point in src/index.ts:\n      - Import and register all commands (init, import, validate, search, trace, list, show, dashboard)\n      - Set up commander program with version and description\n      - Add global options (--config, --verbose)\n      - Add --help with examples\n      - Handle uncaught errors gracefully\n\n      Restrictions:\n      - Use commander for CLI\n      - Show helpful usage information\n      - Clean error output\n\n      _Leverage: all CLI commands, commander\n      _Requirements: REQ-SYS-002\n\n      Success:\n      - All commands registered\n      - Help displays correctly\n      - Entry point works\n\n      Instructions:\n      1. First mark this task as [-] in tasks.md\n      2. Implement entry point\n      3. Mark task as [x] in tasks.md when complete_\n\n---\n\n## Phase 8: Application Layer - API\n\n### Task 8.1: Hono API Server\n\n- [ ] 8.1 Create Hono API server\n  - File: `src/server.ts`, `src/application/api/*.ts`\n  - Implement REST API endpoints\n  - Purpose: Serve data to web dashboard\n  - _Leverage: Hono framework, repositories, services_\n  - _Requirements: REQ-VIS-001, REQ-VIS-003_\n  - _TDD: true_\n  - _TestPath: tests/application/api/*.test.ts_\n  - _Language: ts_\n  - _Prompt: |\n      Implement the task for spec catdoc-mvp, first run spec-workflow-guide to get the workflow guide then implement the task:\n\n      Role: API Developer with Hono expertise\n\n      Task: Create Hono API server:\n      - server.ts: Main server setup with CORS, error handling\n      - objects.ts: GET /api/objects, GET /api/objects/:id\n      - morphisms.ts: GET /api/morphisms, GET /api/morphisms/:id\n      - categories.ts: GET /api/categories, GET /api/categories/:id\n      - functors.ts: GET /api/functors, GET /api/functors/:id\n      - graph.ts: GET /api/graph (returns nodes and edges for visualization)\n      - validate.ts: POST /api/validate (run validation)\n      - trace.ts: POST /api/trace (find transformation paths)\n\n      Restrictions:\n      - Use Hono framework\n      - Bind to 127.0.0.1 only (security)\n      - Return JSON responses\n      - Handle errors with proper HTTP status codes\n\n      _Leverage: Hono framework, repositories, services\n      _Requirements: REQ-VIS-001, REQ-VIS-003\n\n      Success:\n      - Gate-A/B/C all approved\n      - All endpoints work correctly\n      - Proper error handling\n\n      Instructions:\n      1. First mark this task as [-] in tasks.md\n      2. Follow TDD workflow strictly\n      3. After Gate-C approval, mark task as [x] in tasks.md_\n\n---\n\n## Phase 9: Presentation Layer - Svelte Dashboard\n\n### Task 9.1: Svelte Project Setup\n\n- [ ] 9.1 Set up Svelte project structure\n  - Files: `src/presentation/` directory structure\n  - Configure SvelteKit and build\n  - Purpose: Set up frontend build system\n  - _Leverage: SvelteKit, Vite_\n  - _Requirements: REQ-VIS-001_\n  - _TDD: false_\n  - _Prompt: |\n      Implement the task for spec catdoc-mvp, first run spec-workflow-guide to get the workflow guide then implement the task:\n\n      Role: Frontend Developer with Svelte expertise\n\n      Task: Set up Svelte project:\n      - Configure SvelteKit in src/presentation/\n      - Set up Vite build configuration\n      - Create directory structure: lib/components, lib/stores, lib/utils, routes\n      - Add base styles and theme\n      - Configure API client utility\n\n      Restrictions:\n      - Use SvelteKit\n      - Configure for production build\n      - Keep bundle size minimal\n\n      _Leverage: SvelteKit, Vite\n      _Requirements: REQ-VIS-001\n\n      Success:\n      - Project builds successfully\n      - Development server works\n      - Directory structure matches design\n\n      Instructions:\n      1. First mark this task as [-] in tasks.md\n      2. Set up project\n      3. Mark task as [x] in tasks.md when complete_\n\n### Task 9.2: Graph Visualization Component\n\n- [ ] 9.2 Create GraphView component\n  - File: `src/presentation/lib/components/GraphView.svelte`\n  - Implement interactive graph visualization\n  - Purpose: Display category graph visually\n  - _Leverage: cytoscape.js or similar_\n  - _Requirements: REQ-VIS-001, REQ-VIS-002_\n  - _TDD: false_\n  - _Prompt: |\n      Implement the task for spec catdoc-mvp, first run spec-workflow-guide to get the workflow guide then implement the task:\n\n      Role: Frontend Developer with graph visualization expertise\n\n      Task: Create GraphView component:\n      - Props: { nodes: Node[], edges: Edge[], selectedNode?: string }\n      - Events: on:nodeClick, on:edgeClick\n      - Features:\n        - Render nodes (objects) and edges (morphisms)\n        - Different colors/shapes per category\n        - Drag to reposition nodes\n        - Zoom and pan\n        - Auto-layout button (hierarchical)\n        - Highlight selected node and connected edges\n      - Performance: handle 100+ nodes smoothly\n\n      Restrictions:\n      - Use cytoscape.js or similar library\n      - Optimize for performance\n      - Responsive design\n\n      _Leverage: cytoscape.js or similar\n      _Requirements: REQ-VIS-001, REQ-VIS-002\n\n      Success:\n      - Graph renders correctly\n      - Interactions work smoothly\n      - Performance acceptable\n\n      Instructions:\n      1. First mark this task as [-] in tasks.md\n      2. Implement component\n      3. Mark task as [x] in tasks.md when complete_\n\n### Task 9.3: Dashboard UI Components\n\n- [ ] 9.3 Create dashboard UI components\n  - Files: `src/presentation/lib/components/*.svelte`\n  - ObjectList, MorphismList, DetailPanel, CategorySelector, FunctorView\n  - Purpose: Build dashboard interface\n  - _Leverage: Svelte, stores_\n  - _Requirements: REQ-VIS-001, REQ-VIS-003_\n  - _TDD: false_\n  - _Prompt: |\n      Implement the task for spec catdoc-mvp, first run spec-workflow-guide to get the workflow guide then implement the task:\n\n      Role: Frontend Developer with Svelte expertise\n\n      Task: Create dashboard UI components:\n      - ObjectList.svelte: Display objects in list/table with search\n      - MorphismList.svelte: Display morphisms with source/target info\n      - DetailPanel.svelte: Show selected item details\n      - CategorySelector.svelte: Dropdown/tabs to select category\n      - FunctorView.svelte: Visualize functor mappings between categories\n\n      All components:\n      - Use stores for state\n      - Emit events for interactions\n      - Support dark/light theme\n\n      Restrictions:\n      - Keep components focused and reusable\n      - Use consistent styling\n      - Accessible (keyboard navigation, ARIA)\n\n      _Leverage: Svelte, stores\n      _Requirements: REQ-VIS-001, REQ-VIS-003\n\n      Success:\n      - All components work correctly\n      - Styling consistent\n      - Accessible\n\n      Instructions:\n      1. First mark this task as [-] in tasks.md\n      2. Implement components\n      3. Mark task as [x] in tasks.md when complete_\n\n### Task 9.4: Main Dashboard Page\n\n- [ ] 9.4 Create main dashboard page\n  - File: `src/presentation/routes/+page.svelte`\n  - Integrate all components\n  - Purpose: Complete dashboard UI\n  - _Leverage: all components, stores, API client_\n  - _Requirements: REQ-VIS-001, REQ-VIS-002, REQ-VIS-003_\n  - _TDD: false_\n  - _Prompt: |\n      Implement the task for spec catdoc-mvp, first run spec-workflow-guide to get the workflow guide then implement the task:\n\n      Role: Frontend Developer with Svelte expertise\n\n      Task: Create main dashboard page:\n      - Layout: Sidebar (list + controls) + Main (graph) + Panel (details)\n      - Load data from API on mount\n      - Handle loading and error states\n      - Integrate GraphView with selection\n      - Show DetailPanel for selected nodes/edges\n      - CategorySelector to filter view\n      - Functor view mode toggle\n      - Natural transformation visualization\n\n      Restrictions:\n      - Responsive layout\n      - Handle API errors gracefully\n      - Performance: load in <5s for 100 nodes\n\n      _Leverage: all components, stores, API client\n      _Requirements: REQ-VIS-001, REQ-VIS-002, REQ-VIS-003\n\n      Success:\n      - Dashboard fully functional\n      - All features work\n      - Good UX\n\n      Instructions:\n      1. First mark this task as [-] in tasks.md\n      2. Implement dashboard\n      3. Mark task as [x] in tasks.md when complete_\n\n---\n\n## Phase 10: CLI Dashboard Command\n\n### Task 10.1: Dashboard Command\n\n- [ ] 10.1 Create catdoc dashboard command\n  - File: `src/application/cli/dashboard.ts`\n  - Start Hono server and serve Svelte dashboard\n  - Purpose: Launch web dashboard from CLI\n  - _Leverage: src/server.ts, Svelte build_\n  - _Requirements: REQ-VIS-001_\n  - _TDD: true_\n  - _TestPath: tests/application/cli/dashboard.test.ts_\n  - _Language: ts_\n  - _Prompt: |\n      Implement the task for spec catdoc-mvp, first run spec-workflow-guide to get the workflow guide then implement the task:\n\n      Role: CLI/Server Developer\n\n      Task: Create dashboard command:\n      - catdoc dashboard - start dashboard server\n      - Options: --port <port> (default 3000), --open (open browser)\n      - Start Hono server with API routes\n      - Serve Svelte static build\n      - Print URL to console\n      - Handle Ctrl+C gracefully\n\n      Restrictions:\n      - Use commander for CLI\n      - Bind to 127.0.0.1 only\n      - Show clear startup message\n\n      _Leverage: src/server.ts, Svelte build\n      _Requirements: REQ-VIS-001\n\n      Success:\n      - Gate-A/B/C all approved\n      - Server starts correctly\n      - Dashboard accessible\n\n      Instructions:\n      1. First mark this task as [-] in tasks.md\n      2. Follow TDD workflow strictly\n      3. After Gate-C approval, mark task as [x] in tasks.md_\n\n---\n\n## Phase 11: Integration and Testing\n\n### Task 11.1: Integration Tests\n\n- [ ] 11.1 Create integration tests\n  - Files: `tests/integration/*.test.ts`\n  - End-to-end workflow tests\n  - Purpose: Verify complete system works\n  - _Leverage: all components_\n  - _Requirements: All_\n  - _TDD: false_\n  - _Prompt: |\n      Implement the task for spec catdoc-mvp, first run spec-workflow-guide to get the workflow guide then implement the task:\n\n      Role: QA Engineer with E2E testing expertise\n\n      Task: Create integration tests:\n      - cli.test.ts: Test CLI workflow (init → import → validate → search → trace)\n      - api.test.ts: Test API endpoints with real data\n      - Full workflow: Create project, import docs, define categories, validate, visualize\n\n      Restrictions:\n      - Use test databases (not production)\n      - Clean up after tests\n      - Comprehensive coverage\n\n      _Leverage: all components\n      _Requirements: All\n\n      Success:\n      - All integration tests pass\n      - Covers main user workflows\n      - Reliable and repeatable\n\n      Instructions:\n      1. First mark this task as [-] in tasks.md\n      2. Implement tests\n      3. Mark task as [x] in tasks.md when complete_\n\n### Task 11.2: Test Fixtures\n\n- [ ] 11.2 Create test fixtures\n  - Files: `tests/fixtures/*.yaml`, `tests/fixtures/*.md`\n  - Sample data for testing\n  - Purpose: Provide consistent test data\n  - _Leverage: None_\n  - _Requirements: All_\n  - _TDD: false_\n  - _Prompt: |\n      Implement the task for spec catdoc-mvp, first run spec-workflow-guide to get the workflow guide then implement the task:\n\n      Role: QA Engineer\n\n      Task: Create test fixtures:\n      - simple-category.yaml: Basic category with 3-5 objects and morphisms\n      - multi-domain.yaml: Multiple categories with functors and natural transformations\n      - Sample Markdown documents with frontmatter\n      - Invalid YAML files for error testing\n\n      Restrictions:\n      - Keep fixtures small but comprehensive\n      - Cover edge cases\n      - Well-documented\n\n      _Leverage: None\n      _Requirements: All\n\n      Success:\n      - Fixtures cover all test scenarios\n      - Valid and invalid examples\n      - Well-organized\n\n      Instructions:\n      1. First mark this task as [-] in tasks.md\n      2. Create fixtures\n      3. Mark task as [x] in tasks.md when complete_\n\n---\n\n## Phase 12: Documentation and Cleanup\n\n### Task 12.1: README and Examples\n\n- [ ] 12.1 Create documentation\n  - Files: `README.md`, `examples/`\n  - Usage documentation and examples\n  - Purpose: Help users get started\n  - _Leverage: None_\n  - _Requirements: All_\n  - _TDD: false_\n  - _Prompt: |\n      Implement the task for spec catdoc-mvp, first run spec-workflow-guide to get the workflow guide then implement the task:\n\n      Role: Technical Writer\n\n      Task: Create documentation:\n      - README.md: Overview, installation, quick start, command reference\n      - examples/: Working example project with docs and category.yaml\n      - CLI help text for all commands\n\n      Restrictions:\n      - Clear and concise\n      - Include screenshots for dashboard\n      - Keep examples minimal but complete\n\n      _Leverage: None\n      _Requirements: All\n\n      Success:\n      - README complete and accurate\n      - Examples work out of the box\n      - Help text helpful\n\n      Instructions:\n      1. First mark this task as [-] in tasks.md\n      2. Create documentation\n      3. Mark task as [x] in tasks.md when complete_\n",
  "fileStats": {
    "size": 52958,
    "lines": 1386,
    "lastModified": "2025-11-29T18:23:21.737Z"
  },
  "comments": []
}